---
title: "Projects"
---

```{r, echo = FALSE, include = FALSE}
library(yaml)
library(tidyverse)
library(here)

source(here("funs.R"))

proj_yml <- read_yaml(here("projects.yml"))
athr_yml <- read_yaml(here("authors.yml"))
pub_yml  <- read_yaml(here("pubs.yml"))
lnk_cls   <- "{.link-box}"

links <- .create_project_links(proj_yml, athr_yml, pub_yml, lnk_cls)

text <- proj_yml %>%
  imap(~ {
    ttl_lnk <- .x$title %>%
      str_to_lower() %>%
      str_replace_all("( |, )", "-") %>%
      str_c("[", .x$title, "](projects.qmd#", ., "){.bold-link}")
    
    # Conditional add hypothesis
    hyp <- .x$hypothesis
    
    if (!is.null(hyp)) str_c("*", hyp, "*\n\n")
    
    str_c(
      "## ", .x$title,    "\n\n",
      links[[.y]],        "\n\n",
      hyp,
      .x$abstract,        "\n\n"
    )
  }) %>%
  str_c(collapse = "")
```

`r text`
