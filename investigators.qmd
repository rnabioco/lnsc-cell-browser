---
title: "Investigators"
---

```{r, echo = FALSE, include = FALSE}
library(yaml)
library(tidyverse)
library(here)
library(glue)

# Read info and set links to include
proj_yml <- read_yaml(here("projects.yml"))
athr_yml <- read_yaml(here("authors.yml"))
lnk_cls  <- "{.link-box}"

# Only include authors with a project listed in projects.yml
projs <- names(proj_yml)

athr_yml <- athr_yml %>%
  keep(~ {
    is.list(.x) &&
      !is.null(.x$project) &&
      .x$project %in% projs &&
      !is.null(.x$bio)
  })

text <- athr_yml %>%
  imap(~ {
    lnks <- .x$links %>%
      imap(~ str_c("[", str_to_title(.y), "](", .x, ")", lnk_cls)) %>%
      str_c(collapse = " ")
    
    sfx <- ""
    
    if (!is.null(.x$suffix)) sfx <- str_c(", ", .x$suffix)
    
    str_c(
      "## ", .y, sfx, "\n\n",
      lnks,           "\n\n",
      .x$bio,         "\n\n"
    )
  }) %>%
  str_c(collapse = "")
```

`r text`
